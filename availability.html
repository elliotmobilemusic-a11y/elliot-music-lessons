<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Availability – Elliot Wardill Mobile Music Lessons</title>
    <link rel="icon" href="/favicon.png" type="image/png" />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-dark-bg': '#1a1a2e',
                        'brand-accent-light': '#00d084',
                        'brand-accent-dark': '#00a36e',
                        'brand-text-light': '#e0e0e0',
                        'brand-text-mid': '#a0e0e0',
                        'brand-highlight': '#ffb703',
                        'card-bg': '#252538',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Montserrat', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Montserrat:wght@700;800;900&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a2e;
            background-image: radial-gradient(circle at 100% 100%, #252538 0%, #1a1a2e 70%);
            color: #e0e0e0;
        }

        .card-glow {
            box-shadow: 0 10px 30px rgba(0, 208, 132, 0.12), 0 3px 10px rgba(0, 0, 0, 0.6);
        }

        .hover-lift {
            transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.2s ease, background-color 0.2s ease;
        }
        .hover-lift:hover {
            transform: translateY(-4px);
        }

        .main-hero-shadow {
            text-shadow: 0 0 16px rgba(0, 208, 132, 0.4);
        }

        /* Reveal on scroll */
        .reveal {
            opacity: 0;
            transform: translateY(24px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .reveal.delayed-1 { transition-delay: 0.12s; }
        .reveal.delayed-2 { transition-delay: 0.18s; }

        /* Timeline bars */
        .timeline-track {
            position: relative;
            height: 12px;
            border-radius: 999px;
            background: linear-gradient(to right, rgba(160,224,224,0.15), rgba(160,224,224,0.08));
            overflow: hidden;
        }
        .timeline-busy {
            position: absolute;
            top: 0;
            bottom: 0;
            border-radius: 999px;
            background: linear-gradient(to right, #00d084, #ffb703);
        }
        .timeline-free {
            position: absolute;
            top: 0;
            bottom: 0;
            border-radius: 999px;
            background: linear-gradient(to right, rgba(0,208,132,0.12), rgba(0,208,132,0.02));
            border: 1px dashed rgba(0,208,132,0.45);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            border-radius: 999px;
            padding: 0.2rem 0.55rem;
            font-size: 0.7rem;
            font-weight: 600;
            letter-spacing: 0.06em;
            text-transform: uppercase;
        }
    </style>

    <!-- Lucide Icons -->
    <script type="module">
        import {
            createIcons,
            Music2,
            Clock,
            Mail
        } from 'https://cdn.jsdelivr.net/npm/lucide@latest/dist/esm/lucide.js';

        createIcons({
            icons: { Music2, Clock, Mail }
        });
    </script>
</head>

<body class="min-h-screen flex flex-col text-brand-text-light">

    <!-- NAV -->
    <nav class="bg-brand-dark-bg/90 backdrop-blur border-b border-brand-accent-dark/40 text-white sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                
                <a href="index.html" class="flex items-center space-x-2">
                    <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-brand-accent-light/10 border border-brand-accent-light/50">
                        <i data-lucide="music-2" class="w-5 h-5 text-brand-accent-light"></i>
                    </span>
                    <span class="text-sm sm:text-base font-heading font-extrabold tracking-[0.18em] text-brand-highlight">
                        ELLIOT'S MOBILE MUSIC
                    </span>
                </a>

                <div class="hidden sm:flex sm:space-x-4 text-xs md:text-sm">
                    <a href="index.html" class="hover-lift px-3 py-2 border-b-2 border-transparent hover:border-brand-accent-light text-brand-text-mid">
                        HOME
                    </a>
                    <a href="pricing.html" class="hover-lift px-3 py-2 border-b-2 border-transparent hover:border-brand-accent-light text-brand-text-mid">
                        PRICING & FEES
                    </a>
                    <a href="availability.html" class="hover-lift px-3 py-2 border-b-2 border-brand-accent-light text-brand-accent-light">
                        AVAILABILITY
                    </a>
                    <a href="contact.html" class="hover-lift px-3 py-2 border-b-2 border-transparent hover:border-brand-accent-light text-brand-text-mid">
                        CONTACT
                    </a>
                </div>

                <div class="sm:hidden">
                    <button id="mobile-menu-button" class="p-2 text-gray-300 hover:text-white hover:bg-brand-accent-dark rounded-md">
                        <svg class="h-6 w-6" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div class="sm:hidden hidden" id="mobile-menu">
            <div class="pt-2 pb-3 space-y-1 px-3 text-sm">
                <a href="index.html" class="block rounded-md px-3 py-2 text-brand-text-mid hover:bg-brand-accent-dark">HOME</a>
                <a href="pricing.html" class="block rounded-md px-3 py-2 text-brand-text-mid hover:bg-brand-accent-dark">PRICING & FEES</a>
                <a href="availability.html" class="block rounded-md bg-brand-accent-dark text-white px-3 py-2">AVAILABILITY</a>
                <a href="contact.html" class="block rounded-md px-3 py-2 text-brand-text-mid hover:bg-brand-accent-dark">CONTACT</a>
            </div>
        </div>
    </nav>

    <!-- HERO -->
    <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-10">
        <div class="text-center max-w-3xl mx-auto mb-10 reveal">
            <p class="text-xs tracking-[0.25em] text-brand-highlight mb-3 uppercase">
                LIVE EVENING AVAILABILITY
            </p>
            <h1 class="font-heading text-4xl sm:text-5xl lg:text-6xl font-extrabold text-brand-text-light main-hero-shadow mb-3">
                Weekly Evening Schedule
            </h1>
            <p class="text-base sm:text-lg text-brand-text-mid">
                These availability times include realistic travel between lessons across the local area.
            </p>
        </div>
    </section>

    <!-- AVAILABILITY GRID -->
    <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-20">
        <div id="availability-grid" class="grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8 reveal delayed-1"></div>

        <div class="max-w-xl mx-auto mt-10 text-center reveal delayed-2">
            <p class="text-xs sm:text-sm text-brand-text-mid mb-3">
                Times may vary slightly due to traffic or term-time changes. Always ask to confirm availability.
            </p>
            <a href="contact.html#lesson-enquiry"
               class="inline-flex items-center px-5 py-3 bg-brand-accent-light text-brand-dark-bg rounded-lg shadow-lg text-sm font-semibold hover:bg-brand-accent-dark hover:scale-[1.02] transition">
                <i data-lucide="mail" class="w-4 h-4 mr-2"></i>
                Enquire About a Time
            </a>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-gray-900 text-brand-text-mid py-7">
        <div class="max-w-6xl mx-auto px-4 text-center text-xs sm:text-sm">
            <p>&copy; 2024 Elliot Wardill Mobile Music Lessons. All rights reserved.</p>
            <p class="mt-1 text-gray-500">DBS Checked & Insured.</p>
        </div>
    </footer>

    <!-- JS: Menu + Reveal + Availability -->
    <script>
        // Mobile toggle
        document.getElementById('mobile-menu-button').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Reveal effect
        const revealElements = document.querySelectorAll('.reveal');
        const ro = new IntersectionObserver((entries) => {
            entries.forEach((e) => {
                if (e.isIntersecting) {
                    e.target.classList.add('visible');
                    ro.unobserve(e.target);
                }
            });
        }, { threshold: 0.1 });
        revealElements.forEach((el) => ro.observe(el));


        /* ================================
           CLEANED AVAILABILITY SCHEDULE
           NO NAMES • NO POSTCODES • NO PRIVACY DATA
        ================================= */
        
        function timeToMinutes(t) {
            const [h, m] = t.split(':').map(Number);
            return h * 60 + m;
        }
        function minutesToLabel(m) {
            const h = Math.floor(m / 60);
            const mm = m % 60;
            const suffix = h >= 12 ? 'pm' : 'am';
            const displayH = ((h + 11) % 12) + 1;
            const displayM = mm.toString().padStart(2, '0');
            return `${displayH}:${displayM}${suffix}`;
        }

        // CLEANED schedule (PRIVATE)
        const weeklyEvenings = [
            {
                day: 'Tuesday',
                windowStart: '18:00',
                windowEnd: '21:00',
                busyBlocks: [
                    { from: '18:00', to: '19:45', detail: 'Booked lesson + travel time' }
                ],
                note: 'Typically free from around 8:00pm onwards depending on travel that day.'
            },
            {
                day: 'Wednesday',
                windowStart: '18:00',
                windowEnd: '21:00',
                busyBlocks: [
                    { from: '18:00', to: '19:45', detail: 'Two booked lessons + local travel' }
                ],
                note: 'Best availability is usually between 8:00pm and 9:00pm.'
            },
            {
                day: 'Thursday',
                windowStart: '18:00',
                windowEnd: '21:00',
                busyBlocks: [
                    { from: '18:00', to: '20:00', detail: 'Evening partly booked with travel' }
                ],
                note: 'Space occasionally available after 8:00pm — message to check.'
            }
        ];

        function buildAvailabilityCards() {
            const grid = document.getElementById('availability-grid');
            grid.innerHTML = '';

            weeklyEvenings.forEach(e => {
                const startMin = timeToMinutes(e.windowStart);
                const endMin = timeToMinutes(e.windowEnd);
                const total = endMin - startMin;

                const busySorted = [...e.busyBlocks].sort(
                    (a, b) => timeToMinutes(a.from) - timeToMinutes(b.from)
                );

                const freeBlocks = [];
                let cursor = startMin;

                busySorted.forEach(block => {
                    const bStart = timeToMinutes(block.from);
                    const bEnd = timeToMinutes(block.to);
                    if (bStart > cursor + 5) {
                        freeBlocks.push({ fromMin: cursor, toMin: bStart });
                    }
                    cursor = Math.max(cursor, bEnd);
                });

                if (cursor < endMin - 5) {
                    freeBlocks.push({ fromMin: cursor, toMin: endMin });
                }

                const card = document.createElement('article');
                card.className = 'bg-card-bg/90 rounded-2xl card-glow border border-brand-accent-dark/60 p-6 sm:p-7 hover-lift';

                card.innerHTML = `
                    <header class="flex items-start justify-between gap-3">
                        <div>
                            <h2 class="font-heading text-xl sm:text-2xl font-bold text-brand-text-light flex items-center gap-2">
                                <i data-lucide="clock" class="w-5 h-5 text-brand-accent-light"></i>
                                ${e.day} Evenings
                            </h2>
                            <p class="text-xs text-brand-text-mid mt-1">6pm–9pm teaching window</p>
                        </div>
                    </header>

                    <div class="space-y-2 text-xs text-brand-text-mid">
                        <p><strong>Busy:</strong> ${busySorted.map(b => b.detail).join(', ')}</p>
                    </div>

                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-xs text-brand-text-mid mb-1">
                            <span>Travel + lessons timeline</span>
                            <span>${e.windowStart}–${e.windowEnd}</span>
                        </div>

                        <div class="timeline-track">
                            ${busySorted.map(b => {
                                const bStart = timeToMinutes(b.from);
                                const bEnd = timeToMinutes(b.to);
                                const leftPct = ((bStart - startMin) / total) * 100;
                                const widthPct = ((bEnd - bStart) / total) * 100;
                                return `<div class="timeline-busy" style="left:${leftPct}%;width:${widthPct}%"></div>`;
                            }).join('')}

                            ${freeBlocks.map(f => {
                                const leftPct = ((f.fromMin - startMin) / total) * 100;
                                const widthPct = ((f.toMin - f.fromMin) / total) * 100;
                                return `<div class="timeline-free" style="left:${leftPct}%;width:${widthPct}%"></div>`;
                            }).join('')}
                        </div>
                    </div>

                    <div class="space-y-2 text-xs text-brand-text-mid mt-3">
                        ${freeBlocks.length
                            ? `<p><strong>Usually available:</strong> ${
                                freeBlocks.map(f => `${minutesToLabel(f.fromMin)} – ${minutesToLabel(f.toMin)}`).join(', ')
                              }</p>`
                            : `<p><strong>Evening mostly booked.</strong></p>`
                        }
                        <p>${e.note}</p>
                    </div>

                    <button
                        class="w-full mt-4 inline-flex items-center justify-center px-4 py-2 bg-brand-accent-light text-brand-dark-bg rounded-lg text-xs font-semibold hover:bg-brand-accent-dark transition"
                        onclick="window.location.href='contact.html#lesson-enquiry';">
                        <i data-lucide="mail" class="w-4 h-4 mr-2"></i>
                        Request a ${e.day} lesson time
                    </button>
                `;

                grid.appendChild(card);
            });

            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }
        }

        document.addEventListener('DOMContentLoaded', buildAvailabilityCards);
    </script>
</body>
</html>
