<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elliot Wardill – Mobile Piano & Singing Lessons</title>

  <!-- Favicon -->
  <link rel="icon" href="./favicon.png" type="image/png">

  <!-- PWA -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#1a1a2e">

  <!-- iOS PWA Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'brand-dark-bg': '#1a1a2e',
            'brand-accent-light': '#00d084',
            'brand-accent-dark': '#00a36e',
            'brand-text-light': '#e0e0e0',
            'brand-text-mid': '#a0e0e0',
            'brand-highlight': '#ffb703',
            'card-bg': '#252538',
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            heading: ['Montserrat', 'sans-serif'],
          },
        }
      }
    }
  </script>

  <!-- Service Worker (PWA offline + app install) -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./service-worker.js");
      });
    }
  </script>
</head>


    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Montserrat:wght@700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a2e;
            background-image: radial-gradient(circle at 100% 100%, #252538 0%, #1a1a2e 70%);
        }
        .main-hero-shadow {
            text-shadow: 0 0 16px rgba(0, 208, 132, 0.4);
        }
        .card-glow {
            box-shadow: 0 10px 30px rgba(0, 208, 132, 0.12), 0 3px 10px rgba(0, 0, 0, 0.6);
        }
        #sticky-cta {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            z-index: 100;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.25s ease, transform 0.25s ease;
        }
        #sticky-cta.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Typing indicator */
        @keyframes dot-pulse {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.4); }
        }
        .dot-1 { animation: dot-pulse 1.5s infinite 0s; }
        .dot-2 { animation: dot-pulse 1.5s infinite 0.2s; }
        .dot-3 { animation: dot-pulse 1.5s infinite 0.4s; }

        /* Subtle scroll reveal animations */
        .reveal {
            opacity: 0;
            transform: translateY(24px);
            transition:
                opacity 0.8s ease-out,
                transform 0.8s ease-out;
        }
        .reveal.delayed-1 {
            transition-delay: 0.12s;
        }
        .reveal.delayed-2 {
            transition-delay: 0.2s;
        }
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Hover lift utility */
        .hover-lift {
            transition:
                transform 0.25s ease,
                box-shadow 0.25s ease,
                border-color 0.2s ease,
                background-color 0.2s ease;
        }
        .hover-lift:hover {
            transform: translateY(-4px);
        }

        /* Tutor image gold glow */
        .tutor-photo {
            box-shadow: 0 0 32px rgba(255, 183, 3, 0.3);
            transition: transform 0.35s ease, box-shadow 0.35s ease;
        }
        .tutor-photo:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 0 45px rgba(255, 183, 3, 0.45);
        }
    </style>

    <!-- Lucide Icons -->
    <script type="module">
        import {
            createIcons,
            Zap, BookOpen, Clock, Mail, Phone,
            MapPin, MessageSquare, Star, Music2, Users, Send
        } from 'https://cdn.jsdelivr.net/npm/lucide@latest/dist/esm/lucide.js';
        createIcons({
            icons: { Zap, BookOpen, Clock, Mail, Phone, MapPin, MessageSquare, Star, Music2, Users, Send }
        });
    </script>

<!-- Cookie banner (ADD THIS) -->
<script defer src="./cookie-banner.js?v=2"></script>

</head>

<body class="min-h-screen flex flex-col text-brand-text-light">
<!-- NAVIGATION -->
<nav class="bg-brand-dark-bg/90 backdrop-blur border-b border-brand-accent-dark/40 text-white sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">

            <!-- Logo -->
            <a href="index.html" class="flex items-center space-x-2 reveal visible">
                <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-brand-accent-light/10 border border-brand-accent-light/50">
                    <i data-lucide="music-2" class="w-5 h-5 text-brand-accent-light"></i>
                </span>
                <span class="text-sm sm:text-base font-heading font-extrabold tracking-[0.18em] text-brand-highlight">
                    ELLIOT'S MOBILE MUSIC
                </span>
            </a>

            <!-- Desktop nav -->
          
          <div class="hidden sm:flex sm:space-x-4 text-xs md:text-sm">

             <a href="index.html" class="border-b-2 border-brand-accent-light text-brand-accent-light px-3 py-2 font-medium hover-lift">
                HOME
         </a>

             <a href="pricing.html" class="border-b-2 border-transparent hover:border-brand-accent-light hover:text-white text-brand-text-mid px-3 py-2 font-medium hover-lift">
                PRICING & FEES
         </a>

             <a href="availability.html" class="border-b-2 border-transparent hover:border-brand-accent-light hover:text-white text-brand-text-mid px-3 py-2 font-medium hover-lift">
                AVAILABILITY
         </a>

            <a href="school-band-programme.html" class="border-b-2 border-transparent hover:border-brand-accent-light hover:text-white text-brand-text-mid px-3 py-2 font-medium hover-lift">
                SCHOOL BANDS
         </a>

            <a href="contact.html" class="border-b-2 border-transparent hover:border-brand-accent-light hover:text-white text-brand-text-mid px-3 py-2 font-medium hover-lift">
                CONTACT
         </a>

      </div>

        <!-- Mobile button -->
        <div class="sm:hidden">
        <button id="mobile-menu-button"
          class="inline-flex items-center justify-center p-2 rounded-md text-gray-300 hover:text-white hover:bg-brand-accent-dark focus:outline-none focus:ring-2 focus:ring-white"
          aria-controls="mobile-menu"
          aria-expanded="false">
        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 24 24" stroke="currentColor">
       <path stroke-linecap="round" stroke-linejoin="round"
         d="M4 6h16M4 12h16M4 18h16" />
       </svg>
    </button>
  </div>

  </div>
</div>

      <!-- Mobile menu -->
<div class="sm:hidden hidden" id="mobile-menu">
  <div class="pt-2 pb-3 space-y-1 px-3 text-sm">

    <a href="index.html" class="block rounded-md bg-brand-accent-dark text-white px-3 py-2 font-medium">
      HOME
    </a>

    <a href="pricing.html" class="block rounded-md text-brand-text-mid hover:bg-brand-accent-dark px-3 py-2 font-medium">
      PRICING & FEES
    </a>

    <a href="availability.html" class="block rounded-md text-brand-text-mid hover:bg-brand-accent-dark px-3 py-2 font-medium">
      AVAILABILITY
    </a>

    <a href="school-band-programme.html" class="block rounded-md text-brand-text-mid hover:bg-brand-accent-dark px-3 py-2 font-medium">
      SCHOOL BANDS
    </a>

    <a href="contact.html" class="block rounded-md text-brand-text-mid hover:bg-brand-accent-dark px-3 py-2 font-medium">
      CONTACT
    </a>

  </div>
</div>
</nav>


    <!-- MAIN -->
    <main class="flex-grow">
        <!-- HERO -->
        <section id="hero-section" class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 sm:pt-32 pb-20">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <!-- Text side -->
                <div class="reveal">
                    <p class="text-xs font-semibold tracking-[0.28em] text-brand-highlight mb-4 uppercase">
                        PIANO & SINGING LESSONS IN YOUR HOME
                    </p>
                    <h1 class="font-heading text-4xl sm:text-5xl lg:text-6xl font-extrabold main-hero-shadow leading-tight mb-5">
                        Learn the music <span class="text-brand-accent-light">you love</span><br>
                        without leaving home.
                    </h1>
                    <p class="text-base sm:text-lg text-brand-text-mid max-w-xl mb-8">
                        I’m <strong>Elliot Wardill</strong>, a mobile music tutor based in
                        <strong>Pudsey, Leeds</strong>. I travel to you with all the equipment needed,
                        making lessons relaxed, convenient, and tailored to each student.
                    </p>

                    <div class="flex flex-wrap gap-3 mb-6">
                        <div class="flex items-center text-xs sm:text-sm text-brand-text-mid">
                            <span class="w-2 h-2 rounded-full bg-brand-accent-light mr-2"></span>
                            Mobile piano & singing lessons
                        </div>
                        <div class="flex items-center text-xs sm:text-sm text-brand-text-mid">
                            <span class="w-2 h-2 rounded-full bg-brand-highlight mr-2"></span>
                            DBS checked & fully insured
                        </div>
                    </div>

                    <div class="flex flex-wrap gap-4 mb-6">
                        <a href="contact.html"
                           class="inline-flex items-center justify-center px-5 py-3 rounded-lg bg-brand-accent-light text-brand-dark-bg text-sm font-semibold shadow-lg shadow-brand-accent-light/30 hover:bg-brand-accent-dark transform hover:scale-[1.02] transition">
                            <i data-lucide="mail" class="w-4 h-4 mr-2"></i>
                            Book an Intro Lesson (£10)
                        </a>
                        <a href="pricing.html"
                           class="inline-flex items-center justify-center px-5 py-3 rounded-lg border border-brand-highlight text-brand-highlight text-sm font-semibold hover:bg-brand-highlight/10 transform hover:scale-[1.02] transition">
                            View Pricing & Policy
                        </a>
                    </div>

                    <!-- Quick contact line -->
                    <div class="flex flex-wrap items-center gap-4 text-xs sm:text-sm text-brand-text-mid">
                        <span class="flex items-center">
                            <i data-lucide="phone" class="w-4 h-4 mr-1 text-brand-highlight"></i>
                            <a href="tel:07368975144" class="hover:text-white">07368 975144</a>
                        </span>
                        <span class="flex items-center">
                            <i data-lucide="map-pin" class="w-4 h-4 mr-1 text-brand-accent-light"></i>
                            Pudsey, Farsley, Calverley, Bramley & West Leeds
                        </span>
                    </div>
                </div>

                <!-- Visual card / “Meet Elliot” -->
                <div class="bg-card-bg/80 rounded-2xl border border-brand-accent-dark/60 card-glow p-7 flex flex-col gap-5 reveal delayed-1">
                    <div class="flex items-center gap-4">
                        <img
                            src="/images/B778D2ED-6309-4D1F-B167-411BE412F09E.jpg"
                            alt="Elliot Wardill, Music Tutor"
                            class="w-32 h-40 sm:w-36 sm:h-48 rounded-2xl border border-brand-highlight/70 object-cover tutor-photo"
                        >
                        <div>
                            <p class="text-xs font-semibold tracking-[0.22em] uppercase text-brand-highlight mb-1">
                                MEET YOUR TUTOR
                            </p>
                            <h2 class="font-heading text-2xl font-bold text-brand-accent-light mb-1">
                                Elliot Wardill
                            </h2>
                            <p class="text-xs sm:text-sm text-brand-text-mid">
                                Musician & educator working within the education sector,
                                specialising in relaxed, confidence-building piano and singing lessons
                                delivered in the comfort of your own home.
                            </p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3 text-xs sm:text-sm pt-3 border-t border-brand-accent-dark/40 mt-1">
                        <div class="flex items-center">
                            <i data-lucide="book-open" class="w-4 h-4 mr-2 text-brand-accent-light"></i>
                            Tailored learning for all ages
                        </div>
                        <div class="flex items-center">
                            <i data-lucide="zap" class="w-4 h-4 mr-2 text-brand-highlight"></i>
                            DBS checked & insured
                        </div>
                        <div class="flex items-center">
                            <i data-lucide="clock" class="w-4 h-4 mr-2 text-brand-accent-light"></i>
                            Evenings & weekends by request
                        </div>
                        <div class="flex items-center">
                            <i data-lucide="map-pin" class="w-4 h-4 mr-2 text-brand-accent-light"></i>
                            I bring the keyboard to you
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- KEY BENEFITS -->
        <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-24">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-7">
                <div class="bg-card-bg rounded-xl p-6 border-t-4 border-brand-accent-light card-glow hover-lift reveal">
                    <i data-lucide="book-open" class="w-6 h-6 text-brand-accent-light mb-3"></i>
                    <h3 class="font-semibold mb-2 text-brand-text-light text-sm sm:text-base">Tailored to Each Student</h3>
                    <p class="text-xs sm:text-sm text-brand-text-mid">
                        Whether it’s chart songs, grades, or simply playing for fun, lessons are personalised to age, taste, and goals.
                    </p>
                </div>
                <div class="bg-card-bg rounded-xl p-6 border-t-4 border-brand-accent-light card-glow hover-lift reveal delayed-1">
                    <i data-lucide="map-pin" class="w-6 h-6 text-brand-highlight mb-3"></i>
                    <h3 class="font-semibold mb-2 text-brand-text-light text-sm sm:text-base">I Come to You</h3>
                    <p class="text-xs sm:text-sm text-brand-text-mid">
                        No travelling, no waiting rooms. I bring everything needed, including a keyboard where needed.
                    </p>
                </div>
                <div class="bg-card-bg rounded-xl p-6 border-t-4 border-brand-highlight card-glow hover-lift reveal delayed-2">
                    <i data-lucide="zap" class="w-6 h-6 text-brand-highlight mb-3"></i>
                    <h3 class="font-semibold mb-2 text-brand-text-light text-sm sm:text-base">Safe & Professional</h3>
                    <p class="text-xs sm:text-sm text-brand-text-mid">
                        Fully DBS checked and insured, with clear policies on safeguarding, cancellations, and fees.
                    </p>
                </div>
            </div>
        </section>

        <!-- HOW IT WORKS + WHO IT'S FOR -->
        <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-24">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                <!-- How it works -->
                <div class="bg-card-bg rounded-2xl border border-brand-accent-dark/60 card-glow p-7 reveal">
                    <h2 class="font-heading text-2xl sm:text-3xl font-bold text-brand-accent-light mb-4">
                        How mobile lessons work
                    </h2>
                    <ol class="space-y-4 text-sm text-brand-text-mid">
                        <li><span class="font-semibold text-brand-text-light">1. Quick chat & intro lesson</span><br>
                            Send a message or call to check availability. Most students start with a £10 introductory lesson.
                        </li>
                        <li><span class="font-semibold text-brand-text-light">2. I travel to your home</span><br>
                            I bring a keyboard if needed and set up in a space that’s comfortable for the student.
                        </li>
                        <li><span class="font-semibold text-brand-text-light">3. Fun, structured sessions</span><br>
                            We work through warm-ups, songs you enjoy, and skills like rhythm, reading and performance.
                        </li>
                        <li><span class="font-semibold text-brand-text-light">4. Clear follow-up & practice ideas</span><br>
                            After lessons, I’ll often suggest small practice goals to keep progress moving between visits.
                        </li>
                    </ol>
                    <a href="availability.html"
                       class="inline-flex items-center mt-5 text-xs sm:text-sm font-semibold text-brand-highlight hover:text-brand-accent-light transition">
                        Check current availability
                    </a>
                </div>

                <!-- Who it's for -->
                <div class="bg-card-bg rounded-2xl border border-brand-accent-dark/60 card-glow p-7 reveal delayed-1">
                    <h2 class="font-heading text-2xl sm:text-3xl font-bold text-brand-accent-light mb-4">
                        Who lessons are perfect for
                    </h2>
                    <ul class="space-y-3 text-sm text-brand-text-mid mb-5">
                        <li><strong>Children</strong> who want a relaxed introduction to piano or singing.</li>
                        <li><strong>Teenagers</strong> interested in pop songs, performance, or building confidence.</li>
                        <li><strong>Adults</strong> who always wanted to learn but never had chance.</li>
                        <li>Students who prefer learning in their <strong>own home environment</strong>.</li>
                    </ul>
                    <div class="mt-2 bg-brand-dark-bg/70 border border-brand-accent-dark/40 rounded-xl p-4 text-xs sm:text-sm">
                        <p class="font-semibold text-brand-text-light mb-1">
                            Service area:
                        </p>
                        <p class="text-brand-text-mid">
                            Pudsey, Farsley, Calverley, Bramley, Horsforth and wider West Leeds. Travel fees are clearly outlined on the pricing page.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- TRUST / TESTIMONIAL -->
        <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-24">
            <div class="bg-card-bg rounded-2xl border border-brand-accent-dark/60 card-glow p-7 flex flex-col lg:flex-row gap-8 items-center reveal">
                <div class="flex-1">
                    <h2 class="font-heading text-2xl sm:text-3xl font-bold text-brand-accent-light mb-3">
                        A supportive, confidence-building approach
                    </h2>
                    <p class="text-sm sm:text-base text-brand-text-mid mb-5">
                        Lessons are friendly, calm and encouraging. Many students start as complete beginners
                        and quickly discover they’re capable of far more than they thought.
                    </p>
                    <div class="flex flex-wrap gap-4 text-xs sm:text-sm text-brand-text-mid">
                        <span class="inline-flex items-center">
                            <i data-lucide="star" class="w-4 h-4 mr-1 text-brand-highlight"></i>
                            Patient, friendly teaching style
                        </span>
                        <span class="inline-flex items-center">
                            <i data-lucide="users" class="w-4 h-4 mr-1 text-brand-accent-light"></i>
                            Parents welcome to sit in
                        </span>
                    </div>
                </div>
                <div class="flex-[0.9] bg-brand-dark-bg/60 rounded-xl border border-brand-accent-dark/50 p-5 text-xs sm:text-sm text-brand-text-mid">
                    <p class="italic mb-2">
                        “Elliot has been fantastic at building confidence and making lessons something to look forward to each week.
                        Everything is really clear and relaxed, and having lessons at home makes it so much easier.”
                    </p>
                    <p class="font-semibold text-brand-text-light">
                        – Parent, Pudsey
                    </p>
                </div>
            </div>
        </section>

        <!-- POLICY Q&A ASSISTANT -->
        <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-28">
            <div class="bg-card-bg rounded-2xl border border-brand-accent-dark/60 card-glow p-7 reveal">
                <div class="flex flex-wrap items-center justify-between gap-3 border-b border-brand-accent-dark/40 pb-4 mb-5">
                    <div>
                        <h2 class="font-heading text-2xl font-bold text-brand-highlight flex items-center">
                            <i data-lucide="message-square" class="w-6 h-6 mr-2 text-brand-accent-light"></i>
                            Policy Q&A Assistant
                        </h2>
                        <p class="text-xs sm:text-sm text-brand-text-mid mt-1 max-w-xl">
                            Ask quick questions about lesson fees, travel, availability, or safeguarding and get instant answers based on the written policy.
                        </p>
                    </div>
                    <a href="pricing.html" class="text-xs sm:text-sm font-semibold text-brand-highlight hover:text-brand-accent-light transition">
                        View full lesson policy
                    </a>
                </div>

                <div id="chat-box" class="h-[22rem] md:h-80 overflow-y-auto p-4 mb-4 rounded-lg bg-brand-dark-bg border border-brand-accent-dark/50 space-y-3" role="log" aria-live="polite">
                    <div class="flex justify-start initial-message">
                        <div class="max-w-[75%] bg-brand-accent-light/20 text-brand-text-light p-3 rounded-xl rounded-tl-none text-sm shadow">
                            Hello! I am the Policy Assistant. Ask me anything about lesson fees, cancellations, travel, or Elliot's availability.
                        </div>
                    </div>
                    <div id="loading-indicator" class="hidden flex justify-start">
                        <div class="max-w-[75%] bg-brand-highlight/20 text-brand-highlight p-3 rounded-xl rounded-tl-none text-sm shadow flex items-center space-x-1">
                            <span class="text-sm">Typing</span>
                            <span class="w-2 h-2 bg-brand-highlight rounded-full dot-1"></span>
                            <span class="w-2 h-2 bg-brand-highlight rounded-full dot-2"></span>
                            <span class="w-2 h-2 bg-brand-highlight rounded-full dot-3"></span>
                        </div>
                    </div>
                </div>

                <form id="chat-form" class="flex gap-2">
                    <input
                        type="text"
                        id="chat-input"
                        placeholder="E.g. What do you charge for a 60-minute lesson in LS28?"
                        class="flex-grow p-3 rounded-lg bg-brand-dark-bg border border-brand-text-mid/50 focus:outline-none text-brand-text-light text-sm focus:border-brand-accent-light focus:ring-2 focus:ring-brand-accent-light/40"
                    >
                    <button
                        type="submit"
                        id="send-button"
                        class="bg-brand-highlight text-brand-dark-bg px-3 rounded-lg font-semibold hover:bg-brand-highlight/80 transition flex items-center justify-center w-11 h-11"
                        aria-label="Send message"
                    >
                        <i data-lucide="send" class="w-5 h-5"></i>
                    </button>
                </form>
                <p id="error-message" class="text-xs text-red-400 mt-2 hidden"></p>
            </div>
        </section>
    </main>

    <!-- STICKY CTA -->
    <a href="contact.html" id="sticky-cta"
       class="inline-flex items-center justify-center px-4 py-2.5 text-sm font-semibold rounded-full text-brand-dark-bg bg-brand-accent-light hover:bg-brand-accent-dark shadow-xl shadow-brand-accent-light/50">
        <i data-lucide="mail" class="w-4 h-4 mr-1"></i> Book a Lesson
    </a>

    <!-- FOOTER -->
  <footer class="bg-gray-900 text-brand-text-mid py-7 mt-2">
  <div class="max-w-6xl mx-auto px-4 text-center text-xs sm:text-sm">
    <p>&copy; 2026 Elliot Wardill Mobile Music Lessons. All rights reserved.</p>
    <p class="mt-1 text-gray-500">
      DBS Checked &amp; Insured. Programme details are confirmed with schools during setup.
    </p>

    <!-- ADD THIS -->
    <p class="mt-2">
      <a href="privacy.html" class="underline hover:text-white">Privacy</a>
      <span class="mx-2">•</span>
      <a href="cookies.html" class="underline hover:text-white">Cookies</a>
    </p>
  </div>
</footer>

    <!-- JS -->
    <script>
        // Mobile menu toggle
        document.getElementById('mobile-menu-button').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Sticky CTA visibility
        const stickyCta = document.getElementById('sticky-cta');
        const heroSection = document.getElementById('hero-section');

        if (stickyCta && heroSection) {
            const observer = new IntersectionObserver(
                ([entry]) => {
                    if (entry.isIntersecting) {
                        stickyCta.classList.remove('show');
                    } else {
                        stickyCta.classList.add('show');
                    }
                },
                { rootMargin: "0px 0px -70% 0px", threshold: 0.1 }
            );
            observer.observe(heroSection);
        }

        // Scroll reveal on sections
        const revealElements = document.querySelectorAll('.reveal');
        if (revealElements.length) {
            const revealObserver = new IntersectionObserver(
                (entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            revealObserver.unobserve(entry.target);
                        }
                    });
                },
                { threshold: 0.15 }
            );
            revealElements.forEach(el => revealObserver.observe(el));
        }

        // Policy Q&A Assistant (frontend, calls /api/chat on Vercel)
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        const chatBox = document.getElementById('chat-box');
        const loadingIndicator = document.getElementById('loading-indicator');
        const errorMessage = document.getElementById('error-message');
        const sendButton = document.getElementById('send-button');

        const qaSystemPrompt = `You are a helpful, friendly Q&A assistant for Elliot Wardill's Mobile Music Lessons. 
Answer briefly and clearly, using **bold** for key policy details.

Context:
- Tutor: **Elliot Wardill**, mobile piano & singing teacher based in **Pudsey, Leeds**.
- Lessons: In the student's home, keyboard can be provided.
- Intro lesson: **£10**.
- Standard fees: **30 mins – £15**, **60 mins – £30**, **90 mins – £50**.
- Travel: based from Pudsey. Under 5 miles: **£0**; 5–10 miles: **£5**; 10–15 miles: **£10**; 15+ miles: **£20** flat.
- Availability: **Tues–Thurs, 6–9pm** as standard; weekends on request; Monday & Friday unavailable.
- Safety: Fully **DBS checked** and insured. Parents welcome to sit in.
- Cancellations: At least **24 hours’ notice** required. Under 24 hours may be charged **50%** of lesson fee. If Elliot cancels, the lesson is rescheduled at no extra cost.
- Photo/video consent: Optional, can be withdrawn any time by email; only first names used online.`;

        function appendMessage(sender, text) {
            const wrap = document.createElement('div');
            wrap.classList.add('flex', sender === 'user' ? 'justify-end' : 'justify-start');

            const bubble = document.createElement('div');
            bubble.classList.add('max-w-[75%]', 'p-3', 'rounded-xl', 'text-sm', 'shadow', 'break-words', 'whitespace-pre-wrap');

            if (sender === 'user') {
                bubble.classList.add('bg-brand-highlight', 'text-brand-dark-bg', 'rounded-tr-none');
            } else {
                bubble.classList.add('bg-brand-accent-light/20', 'text-brand-text-light', 'rounded-tl-none');
            }

            const p = document.createElement('p');
            p.innerHTML = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            bubble.appendChild(p);
            wrap.appendChild(bubble);
            chatBox.insertBefore(wrap, loadingIndicator);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        async function handleQuery(query) {
            sendButton.disabled = true;
            loadingIndicator.classList.remove('hidden');
            errorMessage.classList.add('hidden');

            appendMessage('user', query);

            try {
                const res = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        message: query.trim(),
                        systemPrompt: qaSystemPrompt
                    })
                });

                if (!res.ok) {
                    throw new Error('Server error: ' + res.status);
                }

                const data = await res.json();
                const text = data.text || "I couldn't find a clear answer there – try asking in a slightly different way.";
                appendMessage('bot', text);
            } catch (err) {
                console.error(err);
                errorMessage.textContent = "Sorry, the assistant is unavailable at the moment. Please try again later.";
                errorMessage.classList.remove('hidden');
            } finally {
                loadingIndicator.classList.add('hidden');
                sendButton.disabled = false;
                chatInput.value = '';
            }
        }

        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const q = chatInput.value.trim();
            if (!q) return;
            const initialMsg = chatBox.querySelector('.initial-message');
            if (initialMsg) initialMsg.remove();
            handleQuery(q);
        });
    </script>
</body>
</html>
