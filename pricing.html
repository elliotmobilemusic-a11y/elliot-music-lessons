<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elliot Wardill Mobile Music Lessons - Fees & Policies</title>
    <link rel="icon" href="/favicon.png" type="image/png">
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Tailwind Config for Theme -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-dark-bg': '#1a1a2e', // Deep dark blue
                        'brand-accent-light': '#00d084', // Vibrant green/aqua
                        'brand-accent-dark': '#00a36e', // Darker green/aqua
                        'brand-text-light': '#e0e0e0', // Light grey for text
                        'brand-text-mid': '#a0a0a0', // Mid grey for secondary text
                        'brand-highlight': '#ffb703', // Vibrant golden yellow
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Montserrat', 'sans-serif'], 
                    },
                }
            }
        }
    </script>

    <!-- Google Fonts & Basic Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Montserrat:wght@700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a2e; 
            color: #e0e0e0; 
            background-image: radial-gradient(circle at 100% 100%, #252538 0%, #1a1a2e 70%);
        }
        .card-glow {
             box-shadow: 0 5px 15px rgba(0, 208, 132, 0.1), 0 2px 5px rgba(0, 208, 132, 0.05);
        }
        .policy-table th {
            background-color: #00a36e;
            color: #1a1a2e;
            font-weight: 700;
        }
        .policy-table td {
            background-color: #252538;
            border-bottom: 1px solid #333355;
        }
        .policy-table tr:hover td {
            background-color: #333355;
        }
        .policy-content p {
            margin-bottom: 1rem;
            line-height: 1.6;
            color: #a0a0a0;
        }
        .policy-content h4 {
            font-weight: bold;
            color: #e0e0e0;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            font-size: 1.25rem;
        }
        /* Loading Spinner */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #ffb703;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>

    <!-- Google Maps JS (Autocomplete + Distance Matrix) -->
    <!-- üëá REPLACE YOUR_GOOGLE_MAPS_API_KEY_HERE with your real key -->
    <script 
        async 
        defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCztWhTrSCVgN1VrzKupHOdpWNreLuvTGs&libraries=places">
    </script>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation Bar -->
    <nav class="bg-brand-dark-bg text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <a href="index.html" class="text-xl font-extrabold tracking-wider text-brand-highlight hover:text-white transition duration-200">
                        ELLIOT'S MOBILE MUSIC
                    </a>
                </div>

                <div class="hidden sm:ml-6 sm:flex sm:space-x-4">
                    <a href="index.html" class="border-b-2 border-transparent hover:border-brand-accent-light hover:text-white text-brand-text-light px-3 py-2 text-sm font-medium transition duration-200">HOME</a>
                    <a href="pricing.html" class="border-b-2 border-brand-accent-light text-brand-accent-light px-3 py-2 text-sm font-medium transition duration-200">PRICING & FEES</a>
                    <a href="availability.html" class="border-b-2 border-transparent hover:border-brand-accent-light hover:text-white text-brand-text-light px-3 py-2 text-sm font-medium transition duration-200">AVAILABILITY</a>
                    <a href="contact.html" class="border-b-2 border-transparent hover:border-brand-accent-light hover:text-white text-brand-text-light px-3 py-2 text-sm font-medium transition duration-200">CONTACT</a>
                </div>

                <div class="sm:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-brand-accent-dark focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-expanded="false">
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div class="sm:hidden hidden" id="mobile-menu">
            <div class="pt-2 pb-3 space-y-1 px-2">
                <a href="index.html" class="text-brand-text-light hover:bg-brand-accent-dark block rounded-md px-3 py-2 text-base font-medium">HOME</a>
                <a href="pricing.html" class="bg-brand-accent-dark text-white block rounded-md px-3 py-2 text-base font-medium">PRICING & FEES</a>
                <a href="availability.html" class="text-brand-text-light hover:bg-brand-accent-dark block rounded-md px-3 py-2 text-base font-medium">AVAILABILITY</a>
                <a href="contact.html" class="text-brand-text-light hover:bg-brand-accent-dark block rounded-md px-3 py-2 text-base font-medium">CONTACT</a>
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-12 sm:py-20 flex-grow">

        <h1 class="font-heading text-5xl font-extrabold text-brand-highlight mb-4 text-center">
            Lesson Fees & Policy
        </h1>
        <p class="text-xl text-brand-text-mid mb-12 text-center">
            Transparent pricing and live travel calculation from Pudsey to your postcode.
        </p>

        <!-- Travel Fee Checker ‚Äì GOOGLE POWERED -->
        <section class="mb-16 p-6 bg-[#252538] rounded-xl card-glow border-2 border-brand-accent-light">
            <h2 class="font-heading text-3xl font-bold text-brand-highlight mb-4">
                Calculate Your Total Lesson Cost
            </h2>
            <p class="text-brand-text-mid mb-4">
                Enter your **postcode or address** and select a duration. We use live road data from Google Maps to estimate the driving distance from **Pudsey**, then apply the correct travel band automatically.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <select id="lesson-duration" class="p-3 rounded-lg bg-brand-dark-bg border border-brand-accent-dark text-white focus:border-brand-highlight focus:ring-brand-highlight w-full">
                    <option value="30">30 Minutes (¬£15.00)</option>
                    <option value="60" selected>60 Minutes (¬£30.00)</option>
                    <option value="90">90 Minutes (¬£50.00)</option>
                </select>
                <input 
                    type="text" 
                    id="postcode-input" 
                    placeholder="Postcode or address (e.g. LS28 or 'Pudsey LS28')" 
                    class="col-span-1 md:col-span-2 p-3 rounded-lg bg-brand-dark-bg border border-brand-accent-dark text-white focus:border-brand-highlight focus:ring-brand-highlight uppercase">
            </div>

            <button id="check-fee-button" class="w-full px-6 py-3 rounded-lg bg-brand-accent-dark hover:bg-brand-accent-light text-white font-bold transition duration-300 transform hover:scale-[1.02] flex items-center justify-center">
                <span id="button-text">Calculate Final Price (Live)</span>
                <span id="loading-spinner" class="spinner ml-3 hidden"></span>
            </button>
            
            <!-- Result Display -->
            <div id="fee-result" class="mt-6 p-4 rounded-xl text-left font-bold hidden border border-brand-highlight/50 transition-all duration-300">
                <!-- Populated by JS -->
            </div>
            <p class="text-sm text-brand-highlight/70 mt-3 text-center">
                *Distance & time provided by Google Maps. Actual route on the day may vary slightly.*
            </p>
        </section>

        <!-- Lesson Rates Table -->
        <section class="mb-16 p-6 bg-[#252538] rounded-xl card-glow">
            <h2 class="font-heading text-3xl font-bold text-brand-accent-light mb-6 border-b border-brand-accent-dark pb-3">Standard Lesson Rates</h2>
            
            <div class="overflow-x-auto rounded-lg">
                <table class="w-full text-left policy-table text-brand-text-light">
                    <thead>
                        <tr>
                            <th class="px-6 py-3">Lesson Duration</th>
                            <th class="px-6 py-3">Fee (Base)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="px-6 py-4 font-semibold">Introductory Offer (First Lesson)</td>
                            <td class="px-6 py-4 text-brand-highlight font-extrabold">¬£10.00</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 font-semibold">30 Minutes</td>
                            <td class="px-6 py-4">¬£15.00</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 font-semibold">60 Minutes</td>
                            <td class="px-6 py-4">¬£30.00</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 font-semibold">90 Minutes</td>
                            <td class="px-6 py-4">¬£50.00</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="mt-4 text-brand-text-mid text-sm">Payment can be made in cash at the lesson or via bank transfer in advance.</p>
        </section>

        <!-- Travel & Cancellation Section -->
        <section class="grid md:grid-cols-2 gap-8 mb-16">
            <!-- Travel Fees -->
            <div class="p-6 bg-[#252538] rounded-xl card-glow border-l-4 border-brand-highlight">
                <h3 class="font-heading text-2xl font-bold text-brand-accent-light mb-4 flex items-center">
                    <span class="text-brand-highlight mr-2 text-xl">üöó</span> Travel Fee Bands
                </h3>
                <p class="text-brand-text-mid mb-4">
                    Lessons are based in **Pudsey**. Travel fees are applied using the live road distance from Pudsey to your location.
                </p>
                
                <table class="w-full text-left policy-table text-brand-text-light text-sm">
                    <thead>
                        <tr>
                            <th class="px-4 py-2">Driving Distance</th>
                            <th class="px-4 py-2">Additional Fee</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td class="px-4 py-2">Under 5 Miles</td><td class="px-4 py-2">¬£0.00</td></tr>
                        <tr><td class="px-4 py-2">5 - 10 Miles</td><td class="px-4 py-2">¬£5.00</td></tr>
                        <tr><td class="px-4 py-2">10 - 15 Miles</td><td class="px-4 py-2">¬£10.00</td></tr>
                        <tr><td class="px-4 py-2">15 Miles +</td><td class="px-4 py-2">¬£20.00 (Flat Rate)</td></tr>
                    </tbody>
                </table>
                <p class="mt-3 text-sm text-brand-highlight/70">
                    The calculator above uses these bands to determine your fee automatically.
                </p>
            </div>

            <!-- Cancellation Policy -->
            <div class="p-6 bg-[#252538] rounded-xl card-glow border-l-4 border-brand-highlight">
                <h3 class="font-heading text-2xl font-bold text-brand-accent-light mb-4 flex items-center">
                    <span class="text-brand-highlight mr-2 text-xl">‚ùå</span> Cancellation Policy
                </h3>
                <ul class="list-disc ml-5 space-y-3 text-brand-text-mid">
                    <li><strong>24 Hours‚Äô Notice:</strong> Please provide at least 24 hours' notice for any cancellation or rescheduling.</li>
                    <li><strong>Late Fee:</strong> Cancellations with less than 24 hours' notice may be charged 50% of the standard lesson fee.</li>
                    <li><strong>If Elliot Cancels:</strong> The lesson will be rescheduled at no extra cost to you.</li>
                </ul>
            </div>
        </section>

        <!-- Full Policy Disclosure -->
        <section class="bg-brand-dark-bg p-6 rounded-xl card-glow">
            <button id="toggle-policy" class="w-full text-left p-4 rounded-lg bg-brand-accent-dark hover:bg-brand-accent-light text-white font-bold text-lg transition duration-300 flex justify-between items-center">
                View Full Music Lesson Policy Document
                <span id="toggle-icon">‚ñº</span>
            </button>
            
            <div id="full-policy-text" class="hidden policy-content mt-4 p-4 border border-brand-accent-dark/50 rounded-lg max-h-96 overflow-y-auto">
                <h3 class="font-heading text-2xl font-bold text-brand-highlight mb-4">Elliot Wardill Music Lesson Policy</h3>
                
                <p>Hello, thank you for booking music lessons! I am Elliot Wardill, a musician and educator based in Pudsey. I have been playing piano and singing for several years and currently work within the education sector. This policy outlines key terms to ensure a clear and smooth lesson experience for everyone.</p>
                <p>I bring all the necessary equipment (including a keyboard) to your home, so there is no need to travel or provide your own instrument. Lessons are designed to be fun, safe, inspiring, and tailored to each student's goals.</p>

                <h4>1. Safety and Safeguarding</h4>
                <p>I hold a valid <strong>DBS check</strong> for working with children, ensuring a safe learning environment. Parents/guardians are welcome to sit in on lessons.</p>
                <p>If your child is enrolled at Stanningley Primary School, any information or incidents disclosed to me during lesson times will be reported directly to the school authorities in line with safeguarding procedures.</p>

                <h4>2. Lesson Fees and Payment</h4>
                <p><strong>First Lesson:</strong> ¬£10 (introductory offer).</p>
                <p><strong>Standard Lessons:</strong> 30 minutes: ¬£15 / 60 minutes: ¬£30 / 90 minutes: ¬£50.</p>

                <h4>3. Cancellations and Rescheduling</h4>
                <p><strong>Notice Required:</strong> Please give at least 24 hours' notice if you need to cancel or reschedule a lesson.</p>
                <p><strong>Late Cancellation Fee:</strong> Cancellations with less than 24 hours' notice may be charged 50% of the lesson fee.</p>
                <p><strong>If I Cancel:</strong> I will reschedule the lesson at no extra cost to you.</p>

                <h4>4. Lesson Structure and Approach</h4>
                <p>Lessons are tailored to each student's age, goals, and interests. For beginners, we will start with fun, simple songs. We will gradually build skills in musicality, rhythm, and performance confidence.</p>

                <h4>5. Travel and Location</h4>
                <p>Lessons are available in the wider Leeds and Bradford areas. Travel fees apply outside the immediate Pudsey area and are calculated using live driving distance from Pudsey:</p>
                <ul class="list-disc ml-5 text-brand-text-mid">
                    <li>Under 5 Miles: <strong>¬£0.00</strong></li>
                    <li>5 - 10 Miles: <strong>¬£5.00</strong></li>
                    <li>10 - 15 Miles: <strong>¬£10.00</strong></li>
                    <li>15+ Miles: <strong>¬£20.00</strong> (Max Flat Rate)</li>
                </ul>

                <h4>6. Availability</h4>
                <p>Standard evening availability: Tuesday, Wednesday, and Thursday (6pm - 9pm). Saturday & Sunday are available upon request. Monday & Friday have no available slots.</p>

                <h4>Contact Information</h4>
                <p>Phone: 07368 975144<br>Email: elliotmobilemusic@gmail.com</p>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-brand-text-mid py-6 mt-12 flex-shrink-0">
        <div class="max-w-6xl mx-auto px-4 text-center text-sm">
            <p>&copy; 2024 Elliot Wardill Mobile Music Lessons. All rights reserved.</p>
            <p class="mt-2 text-gray-500">DBS Checked & Insured. Policy details are provided above.</p>
        </div>
    </footer>
    
    <!-- JavaScript -->
    <script>
        // Mobile Menu Toggle
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            var menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        });

        // Policy Collapse Toggle
        document.getElementById('toggle-policy').addEventListener('click', function() {
            const policyText = document.getElementById('full-policy-text');
            const icon = document.getElementById('toggle-icon');

            if (policyText.classList.contains('hidden')) {
                policyText.classList.remove('hidden');
                icon.textContent = '‚ñ≤';
            } else {
                policyText.classList.add('hidden');
                icon.textContent = '‚ñº';
            }
        });

        // ---- LIVE GOOGLE TRAVEL CALCULATOR ----
        const PUDSEY_ORIGIN = { lat: 53.8116, lng: -1.6706 };
        const LESSON_RATES = {
            30: 15.00,
            60: 30.00,
            90: 50.00
        };

        let autocomplete = null;

        // Try to initialise autocomplete once Google is ready
        function initAutocompleteIfPossible() {
            const input = document.getElementById('postcode-input');
            if (!input) return;
            if (window.google && google.maps && google.maps.places && !autocomplete) {
                autocomplete = new google.maps.places.Autocomplete(input, {
                    types: ['geocode'],
                    componentRestrictions: { country: 'gb' }
                });
            }
        }

        // Extract outward code (LS28, LS12 etc.) from a full UK address / postcode
        function extractOutwardCodeFromAddress(address) {
            if (!address) return '';
            address = address.toUpperCase();
            // e.g. "PUDSEY LS28 7AB" -> LS28
            const match = address.match(/([A-Z]{1,2}\d[A-Z\d]?)/);
            return match ? match[1] : '';
        }

        // Select the right travel band
        function calculateTravelBand(distanceMiles) {
            let fee = 0;
            let label = "Under 5 miles (no travel fee)";
            let color = "text-brand-accent-light";

            if (distanceMiles >= 5 && distanceMiles < 10) {
                fee = 5;
                label = "5‚Äì10 miles";
                color = "text-brand-highlight";
            } else if (distanceMiles >= 10 && distanceMiles < 15) {
                fee = 10;
                label = "10‚Äì15 miles";
                color = "text-brand-highlight";
            } else if (distanceMiles >= 15) {
                fee = 20;
                label = "15+ miles (max flat rate)";
                color = "text-red-400";
            }

            return { fee, label, color };
        }

        async function handleTravelCalculation() {
            const inputElement = document.getElementById('postcode-input');
            const resultElement = document.getElementById('fee-result');
            const durationElement = document.getElementById('lesson-duration');
            const buttonText = document.getElementById('button-text');
            const spinner = document.getElementById('loading-spinner');

            const rawValue = (inputElement.value || '').trim();
            if (!rawValue) {
                resultElement.textContent = "‚ùå Please enter a postcode or address.";
                resultElement.classList.remove('hidden', 'bg-green-900/50');
                resultElement.classList.add('bg-red-900/50');
                return;
            }

            // UI: show loading
            buttonText.textContent = "Calculating with Google Maps‚Ä¶";
            spinner.classList.remove('hidden');
            resultElement.classList.add('hidden');

            try {
                initAutocompleteIfPossible();

                let destinationQuery = rawValue;
                // If user picked from autocomplete, prefer Google's formatted address
                if (autocomplete) {
                    const place = autocomplete.getPlace && autocomplete.getPlace();
                    if (place && place.formatted_address) {
                        destinationQuery = place.formatted_address;
                    }
                }

                if (!(window.google && google.maps && google.maps.DistanceMatrixService)) {
                    throw new Error("Google Maps service not available.");
                }

                const service = new google.maps.DistanceMatrixService();

                const matrix = await new Promise((resolve, reject) => {
                    service.getDistanceMatrix(
                        {
                            origins: [PUDSEY_ORIGIN],
                            destinations: [destinationQuery],
                            travelMode: google.maps.TravelMode.DRIVING,
                            unitSystem: google.maps.UnitSystem.IMPERIAL
                        },
                        (response, status) => {
                            if (status !== 'OK') {
                                reject(new Error('Distance Matrix error: ' + status));
                            } else {
                                resolve(response);
                            }
                        }
                    );
                });

                const row = matrix.rows[0];
                const element = row.elements[0];

                if (!element || element.status !== 'OK') {
                    throw new Error("Google couldn't find a good driving route for that location.");
                }

                const distanceText = element.distance.text; // e.g. "4.3 mi"
                const distanceMiles = element.distance.value * 0.000621371; // meters ‚Üí miles
                const durationText = element.duration.text; // e.g. "17 mins"
                const destinationAddress = matrix.destinationAddresses[0] || destinationQuery;

                const outwardCode = extractOutwardCodeFromAddress(destinationAddress);
                const lessonDuration = durationElement.value;
                const baseLessonFee = LESSON_RATES[lessonDuration];

                const band = calculateTravelBand(distanceMiles);
                const total = baseLessonFee + band.fee;

                resultElement.innerHTML = `
                    <div class="space-y-2 text-sm md:text-base">
                        <p class="text-brand-text-mid">
                            <span class="font-semibold text-brand-text-light">Destination:</span>
                            <br>${destinationAddress}
                            ${outwardCode ? `<br><span class="text-brand-highlight text-xs">Detected area: ${outwardCode}</span>` : ""}
                        </p>
                        <p class="text-brand-text-mid">
                            <span class="font-semibold text-brand-text-light">Driving distance:</span>
                            <br>${distanceText} (${band.label})
                        </p>
                        <p class="text-brand-text-mid">
                            <span class="font-semibold text-brand-text-light">Estimated driving time:</span>
                            <br>${durationText}
                        </p>
                        <div class="mt-4 pt-3 border-t border-brand-accent-light/40 grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div>
                                <p class="text-brand-text-light">Lesson fee (${lessonDuration} min):</p>
                                <p class="text-xl font-extrabold">¬£${baseLessonFee.toFixed(2)}</p>
                            </div>
                            <div>
                                <p class="text-brand-text-light">Travel fee:</p>
                                <p class="text-xl font-extrabold ${band.color}">¬£${band.fee.toFixed(2)}</p>
                            </div>
                        </div>
                        <div class="mt-4 pt-3 border-t border-brand-accent-light/40">
                            <p class="text-brand-highlight text-3xl font-extrabold">
                                Total Estimated Cost: ¬£${total.toFixed(2)}
                            </p>
                            <p class="text-xs text-brand-text-mid mt-1">
                                This is an estimate based on typical routes and traffic. Elliot will confirm final details when booking.
                            </p>
                        </div>
                    </div>
                `;
                resultElement.classList.remove('hidden', 'bg-red-900/50');
                resultElement.classList.add('bg-green-900/50');

            } catch (err) {
                console.error(err);
                resultElement.textContent = "‚ùå " + err.message + " Please check the postcode and try again.";
                resultElement.classList.remove('hidden', 'bg-green-900/50');
                resultElement.classList.add('bg-red-900/50');
            } finally {
                buttonText.textContent = "Calculate Final Price (Live)";
                spinner.classList.add('hidden');
            }
        }

        document.getElementById('check-fee-button').addEventListener('click', handleTravelCalculation);

        document.getElementById('postcode-input').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                handleTravelCalculation();
            }
        });

        // Try initialise autocomplete a short time after page load
        window.addEventListener('load', () => {
            setTimeout(initAutocompleteIfPossible, 800);
        });
    </script>

</body>
</html>
